# Spins up all quickstart services. Run the iii engine on the host first:
#   iii -c iii-config.yaml
#
# Services connect to iii via host.docker.internal. On Linux (Docker <20.10),
# add: extra_hosts: ["host.docker.internal:host-gateway"]
# Note: This Docker Compose file is for demonstration only and not intended
# to represent a full production system.

services:
  client:
    build:
      context: ./services/client
      dockerfile: Dockerfile
    environment:
      III_BRIDGE_URL: ws://host.docker.internal:49134
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

  compute-service:
    build:
      context: ./services/compute-service
      dockerfile: Dockerfile
    environment:
      III_BRIDGE_URL: ws://host.docker.internal:49134
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

  data-service:
    build:
      context: ./services/data-service
      dockerfile: Dockerfile
    environment:
      III_BRIDGE_URL: ws://host.docker.internal:49134
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped

  payment-service:
    build:
      context: ./services/payment-service
      dockerfile: Dockerfile
    environment:
      III_BRIDGE_URL: ws://host.docker.internal:49134
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
